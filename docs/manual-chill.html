<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Manual chill | Tree phenology analysis with R</title>
  <meta name="description" content="Chapter 6 Manual chill | Tree phenology analysis with R" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Manual chill | Tree phenology analysis with R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Manual chill | Tree phenology analysis with R" />
  
  
  

<meta name="author" content="Jacqueline Wingen" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="winter-chill-projections.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tree phenology Analysis with R</a></li>
<li><a href="index.html"><img src="images/chillR_hexSticker.png" width="75%"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the Module</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i><b>1.1</b> Learning goals</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>2</b> Tools</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tools.html"><a href="tools.html#r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="tools.html"><a href="tools.html#git-and-github"><i class="fa fa-check"></i><b>2.2</b> Git and Github</a></li>
<li class="chapter" data-level="2.3" data-path="tools.html"><a href="tools.html#rmarkdown"><i class="fa fa-check"></i><b>2.3</b> Rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tree-dormancy.html"><a href="tree-dormancy.html"><i class="fa fa-check"></i><b>3</b> Tree dormancy</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tree-dormancy.html"><a href="tree-dormancy.html#learning-goals-1"><i class="fa fa-check"></i><b>3.1</b> Learning goals</a></li>
<li class="chapter" data-level="3.2" data-path="tree-dormancy.html"><a href="tree-dormancy.html#introduction-to-dormancy"><i class="fa fa-check"></i><b>3.2</b> Introduction to dormancy</a></li>
<li class="chapter" data-level="3.3" data-path="tree-dormancy.html"><a href="tree-dormancy.html#dormancy-physiology"><i class="fa fa-check"></i><b>3.3</b> Dormancy physiology</a></li>
<li class="chapter" data-level="3.4" data-path="tree-dormancy.html"><a href="tree-dormancy.html#experimental-and-statistical-determination-of-chilling-and-forcing-periods"><i class="fa fa-check"></i><b>3.4</b> Experimental and statistical determination of chilling and forcing periods</a></li>
<li class="chapter" data-level="3.5" data-path="tree-dormancy.html"><a href="tree-dormancy.html#phenology-record-and-bbch-scale"><i class="fa fa-check"></i><b>3.5</b> Phenology record and BBCH scale</a></li>
<li class="chapter" data-level="3.6" data-path="tree-dormancy.html"><a href="tree-dormancy.html#excercises-on-tree-dormancy"><i class="fa fa-check"></i><b>3.6</b> <code>Excercises</code> on tree dormancy</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html"><i class="fa fa-check"></i><b>4</b> Climate change and impact projection</a>
<ul>
<li class="chapter" data-level="4.1" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html#the-drivers-of-climate-change"><i class="fa fa-check"></i><b>4.1</b> The drivers of climate change</a></li>
<li class="chapter" data-level="4.2" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html#whats-already-known"><i class="fa fa-check"></i><b>4.2</b> What’s already known</a></li>
<li class="chapter" data-level="4.3" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html#future-scenarios"><i class="fa fa-check"></i><b>4.3</b> Future scenarios</a></li>
<li class="chapter" data-level="4.4" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html#impact-projections-approaches"><i class="fa fa-check"></i><b>4.4</b> Impact projections approaches</a></li>
<li class="chapter" data-level="4.5" data-path="climate-change-and-impact-projection.html"><a href="climate-change-and-impact-projection.html#exercises-on-climate-change"><i class="fa fa-check"></i><b>4.5</b> <code>Exercises</code> on climate change</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html"><i class="fa fa-check"></i><b>5</b> Winter chill projections</a>
<ul>
<li class="chapter" data-level="5.1" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#learning-goals-2"><i class="fa fa-check"></i><b>5.1</b> Learning goals</a></li>
<li class="chapter" data-level="5.2" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-in-oman"><i class="fa fa-check"></i><b>5.2</b> Winter chill in Oman</a></li>
<li class="chapter" data-level="5.3" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#chill-model-sensitivity"><i class="fa fa-check"></i><b>5.3</b> Chill model sensitivity</a></li>
<li class="chapter" data-level="5.4" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-in-california"><i class="fa fa-check"></i><b>5.4</b> Winter chill in California</a></li>
<li class="chapter" data-level="5.5" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-ratios"><i class="fa fa-check"></i><b>5.5</b> Winter chill ratios</a></li>
<li class="chapter" data-level="5.6" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#a-global-projection-of-future-winter-chill"><i class="fa fa-check"></i><b>5.6</b> A global projection of future winter chill</a></li>
<li class="chapter" data-level="5.7" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-in-germany"><i class="fa fa-check"></i><b>5.7</b> Winter chill in Germany</a></li>
<li class="chapter" data-level="5.8" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-in-tunisia"><i class="fa fa-check"></i><b>5.8</b> Winter chill in Tunisia</a></li>
<li class="chapter" data-level="5.9" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#winter-chill-in-chile"><i class="fa fa-check"></i><b>5.9</b> Winter chill in Chile</a></li>
<li class="chapter" data-level="5.10" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#chill-projection-for-patagonia"><i class="fa fa-check"></i><b>5.10</b> Chill projection for Patagonia</a></li>
<li class="chapter" data-level="5.11" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#chill-model-comparison"><i class="fa fa-check"></i><b>5.11</b> Chill model comparison</a></li>
<li class="chapter" data-level="5.12" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#chill-projection-for-all-of-tunisia"><i class="fa fa-check"></i><b>5.12</b> Chill projection for all of Tunisia</a></li>
<li class="chapter" data-level="5.13" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#revisiting-chill-accumulation-in-oman"><i class="fa fa-check"></i><b>5.13</b> Revisiting chill accumulation in Oman</a></li>
<li class="chapter" data-level="5.14" data-path="winter-chill-projections.html"><a href="winter-chill-projections.html#exercises-on-past-chill-projections"><i class="fa fa-check"></i><b>5.14</b> <code>Exercises</code> on past chill projections</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="manual-chill.html"><a href="manual-chill.html"><i class="fa fa-check"></i><b>6</b> Manual chill</a>
<ul>
<li class="chapter" data-level="6.1" data-path="manual-chill.html"><a href="manual-chill.html#learning-goals-3"><i class="fa fa-check"></i><b>6.1</b> Learning goals</a></li>
<li class="chapter" data-level="6.2" data-path="manual-chill.html"><a href="manual-chill.html#chilling-hours-calculation-using-chillr"><i class="fa fa-check"></i><b>6.2</b> Chilling hours calculation using chillR</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="manual-chill.html"><a href="manual-chill.html#data-requirements"><i class="fa fa-check"></i><b>6.2.1</b> <strong>Data Requirements</strong></a></li>
<li class="chapter" data-level="6.2.2" data-path="manual-chill.html"><a href="manual-chill.html#loading-and-preparing-data"><i class="fa fa-check"></i><b>6.2.2</b> Loading and Preparing Data</a></li>
<li class="chapter" data-level="6.2.3" data-path="manual-chill.html"><a href="manual-chill.html#manual-calculation-of-chilling-hours"><i class="fa fa-check"></i><b>6.2.3</b> <strong>Manual Calculation of Chilling Hours</strong></a></li>
<li class="chapter" data-level="6.2.4" data-path="manual-chill.html"><a href="manual-chill.html#automation-with-functions"><i class="fa fa-check"></i><b>6.2.4</b> Automation with Functions</a></li>
<li class="chapter" data-level="6.2.5" data-path="manual-chill.html"><a href="manual-chill.html#application-example"><i class="fa fa-check"></i><b>6.2.5</b> Application Example</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="manual-chill.html"><a href="manual-chill.html#exercises-on-basic-chill-modeling"><i class="fa fa-check"></i><b>6.3</b> <code>Exercises</code> on basic chill modeling</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tree phenology analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manual-chill" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Manual chill<a href="manual-chill.html#manual-chill" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter explains how to calculate Chilling Hours using R and the <code>chillR</code> package. Chilling Hours measure the number of hours where temperatures are between 0°C and 7.2°C, which is important for certain plants to meet their cold requirements during dormancy and grow properly.</p>
<div id="learning-goals-3" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Learning goals<a href="manual-chill.html#learning-goals-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Learn about some basic R operations we need for calculating Chilling Hours</li>
<li>Be able to calculate Chilling Hours</li>
<li>Understand what an R function is</li>
<li>Be able to write your own basic function</li>
</ul>
</div>
<div id="chilling-hours-calculation-using-chillr" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Chilling hours calculation using chillR<a href="manual-chill.html#chilling-hours-calculation-using-chillr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Basic models like the Chilling Hours Model are simple and can be calculated manually, especially if familiar with R or spreadsheet software. This example will show how to understand and use the functions in the <code>chillR</code> package to calculate these chill hours.</p>
<div id="data-requirements" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> <strong>Data Requirements</strong><a href="manual-chill.html#data-requirements" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Chilling Hours Model is relatively simple but requires hourly temperature data. A common challenge is the unavailability of such data, though approximations can be made from daily records using <code>chillR</code> tools. For this example, a sample dataset, <code>Winters_hours_gaps</code>, provided within <code>chillR</code>, was used. It contains hourly temperature data recorded in 2008 from a walnut orchard in Winters, California, and is structured with columns for year, month, day, hour, and temperature.</p>
</div>
<div id="loading-and-preparing-data" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Loading and Preparing Data<a href="manual-chill.html#loading-and-preparing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To work with <code>chillR</code>, the package was loaded using <code>library(chillR)</code>. The data can also be imported via <code>read.table()</code> or <code>read.csv()</code> for external datasets. The <code>Winters_hours_gaps</code> dataset was filtered to retain only the essential columns: year, month, day, hour, and temperature. This cleaned version, stored in a new dataframe called <code>hourtemps</code>, ensures the data is in the correct format for calculating Chilling Hours:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="manual-chill.html#cb1-1" tabindex="-1"></a><span class="co">#install.packages(&quot;chillR&quot;)</span></span>
<span id="cb1-2"><a href="manual-chill.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(chillR)</span>
<span id="cb1-3"><a href="manual-chill.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-4"><a href="manual-chill.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(pander)</span>
<span id="cb1-5"><a href="manual-chill.html#cb1-5" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-6"><a href="manual-chill.html#cb1-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="manual-chill.html#cb2-1" tabindex="-1"></a>hourtemps <span class="ot">&lt;-</span> Winters_hours_gaps[,<span class="fu">c</span>(<span class="st">&quot;Year&quot;</span>,</span>
<span id="cb2-2"><a href="manual-chill.html#cb2-2" tabindex="-1"></a>                                   <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb2-3"><a href="manual-chill.html#cb2-3" tabindex="-1"></a>                                   <span class="st">&quot;Day&quot;</span>,</span>
<span id="cb2-4"><a href="manual-chill.html#cb2-4" tabindex="-1"></a>                                   <span class="st">&quot;Hour&quot;</span>,</span>
<span id="cb2-5"><a href="manual-chill.html#cb2-5" tabindex="-1"></a>                                   <span class="st">&quot;Temp&quot;</span>)]</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; color: black; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Year
</th>
<th style="text-align:center;">
Month
</th>
<th style="text-align:center;">
Day
</th>
<th style="text-align:center;">
Hour
</th>
<th style="text-align:center;">
Temp
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15.127
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
17.153
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
18.699
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
18.699
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
18.842
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
19.508
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
19.318
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
17.701
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
15.414
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
19
</td>
<td style="text-align:center;">
12.727
</td>
</tr>
</tbody>
</table>
</div>
<div id="manual-calculation-of-chilling-hours" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> <strong>Manual Calculation of Chilling Hours</strong><a href="manual-chill.html#manual-calculation-of-chilling-hours" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Chilling Hours are defined as any hour where the temperature falls between 0°C and 7.2°C. A logical comparison was used in R to identify whether each hour met this criterion:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="manual-chill.html#cb3-1" tabindex="-1"></a>hourtemps[, <span class="st">&quot;Chilling_Hour&quot;</span>] <span class="ot">&lt;-</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&lt;=</span> <span class="fl">7.2</span></span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; color: black; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Year
</th>
<th style="text-align:center;">
Month
</th>
<th style="text-align:center;">
Day
</th>
<th style="text-align:center;">
Hour
</th>
<th style="text-align:center;">
Temp
</th>
<th style="text-align:center;">
Chilling_Hour
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15.127
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
17.153
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
18.842
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
19.508
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
19.318
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
17.701
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
15.414
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
19
</td>
<td style="text-align:center;">
12.727
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
</tbody>
</table>
<p>A new column, <code>Chilling_Hour</code>, was created, indicating whether a given hour was a valid Chilling Hour (TRUE or FALSE). These values can then be summed to calculate the total number of Chilling Hours for any period using the <code>sum()</code> function.</p>
</div>
<div id="automation-with-functions" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Automation with Functions<a href="manual-chill.html#automation-with-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A function is a tool that automates a particular procedure. It consists of a name, some arguments that are passed to the function, and some code that should be executed. To avoid repeating manual calculations, a reusable function called <code>CH</code> was created to automate the addition of a <code>Chilling_Hour</code> column:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="manual-chill.html#cb4-1" tabindex="-1"></a>CH <span class="ot">&lt;-</span> <span class="cf">function</span>(hourtemps) {</span>
<span id="cb4-2"><a href="manual-chill.html#cb4-2" tabindex="-1"></a>  hourtemps[, <span class="st">&quot;Chilling_Hour&quot;</span>] <span class="ot">&lt;-</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&lt;=</span> <span class="fl">7.2</span></span>
<span id="cb4-3"><a href="manual-chill.html#cb4-3" tabindex="-1"></a>  <span class="fu">return</span>(hourtemps)</span>
<span id="cb4-4"><a href="manual-chill.html#cb4-4" tabindex="-1"></a>}</span></code></pre></div>
<p>This function applies to any appropriately structured dataset. Additionally, a more complex function, <code>sum_CH</code>, was developed to calculate the total Chilling Hours between two specific dates:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="manual-chill.html#cb5-1" tabindex="-1"></a>sum_CH <span class="ot">&lt;-</span> <span class="cf">function</span>(hourtemps, Start_Year,</span>
<span id="cb5-2"><a href="manual-chill.html#cb5-2" tabindex="-1"></a>                              Start_Month,</span>
<span id="cb5-3"><a href="manual-chill.html#cb5-3" tabindex="-1"></a>                              Start_Day, </span>
<span id="cb5-4"><a href="manual-chill.html#cb5-4" tabindex="-1"></a>                              Start_Hour, </span>
<span id="cb5-5"><a href="manual-chill.html#cb5-5" tabindex="-1"></a>                              End_Year, </span>
<span id="cb5-6"><a href="manual-chill.html#cb5-6" tabindex="-1"></a>                              End_Month, </span>
<span id="cb5-7"><a href="manual-chill.html#cb5-7" tabindex="-1"></a>                              End_Day, </span>
<span id="cb5-8"><a href="manual-chill.html#cb5-8" tabindex="-1"></a>                              End_Hour) </span>
<span id="cb5-9"><a href="manual-chill.html#cb5-9" tabindex="-1"></a>  </span>
<span id="cb5-10"><a href="manual-chill.html#cb5-10" tabindex="-1"></a>{hourtemps[,<span class="st">&quot;Chilling_Hour&quot;</span>] <span class="ot">&lt;-</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb5-11"><a href="manual-chill.html#cb5-11" tabindex="-1"></a>                                hourtemps<span class="sc">$</span>Temp  <span class="sc">&lt;=</span> <span class="fl">7.2</span></span>
<span id="cb5-12"><a href="manual-chill.html#cb5-12" tabindex="-1"></a></span>
<span id="cb5-13"><a href="manual-chill.html#cb5-13" tabindex="-1"></a>  Start_Date <span class="ot">&lt;-</span> <span class="fu">which</span>(hourtemps<span class="sc">$</span>Year <span class="sc">==</span> Start_Year <span class="sc">&amp;</span> </span>
<span id="cb5-14"><a href="manual-chill.html#cb5-14" tabindex="-1"></a>                      hourtemps<span class="sc">$</span>Month <span class="sc">==</span> Start_Month <span class="sc">&amp;</span></span>
<span id="cb5-15"><a href="manual-chill.html#cb5-15" tabindex="-1"></a>                      hourtemps<span class="sc">$</span>Day <span class="sc">==</span> Start_Day <span class="sc">&amp;</span></span>
<span id="cb5-16"><a href="manual-chill.html#cb5-16" tabindex="-1"></a>                      hourtemps<span class="sc">$</span>Hour <span class="sc">==</span> Start_Hour)</span>
<span id="cb5-17"><a href="manual-chill.html#cb5-17" tabindex="-1"></a>  </span>
<span id="cb5-18"><a href="manual-chill.html#cb5-18" tabindex="-1"></a>  End_Date <span class="ot">&lt;-</span> <span class="fu">which</span>(hourtemps<span class="sc">$</span>Year <span class="sc">==</span> End_Year <span class="sc">&amp;</span></span>
<span id="cb5-19"><a href="manual-chill.html#cb5-19" tabindex="-1"></a>                    hourtemps<span class="sc">$</span>Month <span class="sc">==</span> End_Month <span class="sc">&amp;</span></span>
<span id="cb5-20"><a href="manual-chill.html#cb5-20" tabindex="-1"></a>                    hourtemps<span class="sc">$</span>Day <span class="sc">==</span> End_Day <span class="sc">&amp;</span> </span>
<span id="cb5-21"><a href="manual-chill.html#cb5-21" tabindex="-1"></a>                    hourtemps<span class="sc">$</span>Hour <span class="sc">==</span> End_Hour)</span>
<span id="cb5-22"><a href="manual-chill.html#cb5-22" tabindex="-1"></a>  </span>
<span id="cb5-23"><a href="manual-chill.html#cb5-23" tabindex="-1"></a>  CHs <span class="ot">&lt;-</span> <span class="fu">sum</span>(hourtemps<span class="sc">$</span>Chilling_Hour[Start_Date<span class="sc">:</span>End_Date])</span>
<span id="cb5-24"><a href="manual-chill.html#cb5-24" tabindex="-1"></a>  <span class="fu">return</span>(CHs)</span>
<span id="cb5-25"><a href="manual-chill.html#cb5-25" tabindex="-1"></a>}</span></code></pre></div>
<p>This function calculates Chilling Hours for a user-defined date range, using the <code>which()</code> function to identify the relevant rows in the dataset corresponding to the start and end dates.</p>
<p>To simplify the parameter passing, compact strings in the format <code>YEARMODAHO</code> (year, month, day, and hour as consecutive numbers) can be used instead of individual parameters for year, month, day, and hour. The start and end times are now passed as strings, from which the required values are extracted using the <code>substr()</code> function and converted to numeric values with <code>as.numeric()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="manual-chill.html#cb6-1" tabindex="-1"></a>sum_CH <span class="ot">&lt;-</span> <span class="cf">function</span>(hourtemps, </span>
<span id="cb6-2"><a href="manual-chill.html#cb6-2" tabindex="-1"></a>                   startYEARMODAHO,</span>
<span id="cb6-3"><a href="manual-chill.html#cb6-3" tabindex="-1"></a>                   endYEARMODAHO)</span>
<span id="cb6-4"><a href="manual-chill.html#cb6-4" tabindex="-1"></a>{hourtemps[,<span class="st">&quot;Chilling_Hour&quot;</span>] <span class="ot">&lt;-</span> hourtemps<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb6-5"><a href="manual-chill.html#cb6-5" tabindex="-1"></a>  hourtemps<span class="sc">$</span>Temp <span class="sc">&lt;=</span> <span class="fl">7.2</span></span>
<span id="cb6-6"><a href="manual-chill.html#cb6-6" tabindex="-1"></a></span>
<span id="cb6-7"><a href="manual-chill.html#cb6-7" tabindex="-1"></a>startYear <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb6-8"><a href="manual-chill.html#cb6-8" tabindex="-1"></a>startMonth <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb6-9"><a href="manual-chill.html#cb6-9" tabindex="-1"></a>startDay <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb6-10"><a href="manual-chill.html#cb6-10" tabindex="-1"></a>startHour <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb6-11"><a href="manual-chill.html#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="manual-chill.html#cb6-12" tabindex="-1"></a>endYear <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb6-13"><a href="manual-chill.html#cb6-13" tabindex="-1"></a>endMonth <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb6-14"><a href="manual-chill.html#cb6-14" tabindex="-1"></a>endDay <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb6-15"><a href="manual-chill.html#cb6-15" tabindex="-1"></a>endHour <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb6-16"><a href="manual-chill.html#cb6-16" tabindex="-1"></a></span>
<span id="cb6-17"><a href="manual-chill.html#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="manual-chill.html#cb6-18" tabindex="-1"></a>Start_row <span class="ot">&lt;-</span> <span class="fu">which</span>(hourtemps<span class="sc">$</span>Year <span class="sc">==</span> startYear <span class="sc">&amp;</span></span>
<span id="cb6-19"><a href="manual-chill.html#cb6-19" tabindex="-1"></a>                   hourtemps<span class="sc">$</span>Month <span class="sc">==</span> startMonth <span class="sc">&amp;</span></span>
<span id="cb6-20"><a href="manual-chill.html#cb6-20" tabindex="-1"></a>                   hourtemps<span class="sc">$</span>Day <span class="sc">==</span> startDay <span class="sc">&amp;</span></span>
<span id="cb6-21"><a href="manual-chill.html#cb6-21" tabindex="-1"></a>                   hourtemps<span class="sc">$</span>Hour <span class="sc">==</span> startHour</span>
<span id="cb6-22"><a href="manual-chill.html#cb6-22" tabindex="-1"></a>)</span>
<span id="cb6-23"><a href="manual-chill.html#cb6-23" tabindex="-1"></a>End_row <span class="ot">&lt;-</span> <span class="fu">which</span>(hourtemps<span class="sc">$</span>Year <span class="sc">==</span> endYear <span class="sc">&amp;</span></span>
<span id="cb6-24"><a href="manual-chill.html#cb6-24" tabindex="-1"></a>                 hourtemps<span class="sc">$</span>Month <span class="sc">==</span> endMonth <span class="sc">&amp;</span></span>
<span id="cb6-25"><a href="manual-chill.html#cb6-25" tabindex="-1"></a>                 hourtemps<span class="sc">$</span>Day <span class="sc">==</span> endDay <span class="sc">&amp;</span></span>
<span id="cb6-26"><a href="manual-chill.html#cb6-26" tabindex="-1"></a>                 hourtemps<span class="sc">$</span>Hour <span class="sc">==</span> endHour</span>
<span id="cb6-27"><a href="manual-chill.html#cb6-27" tabindex="-1"></a>)</span>
<span id="cb6-28"><a href="manual-chill.html#cb6-28" tabindex="-1"></a></span>
<span id="cb6-29"><a href="manual-chill.html#cb6-29" tabindex="-1"></a>CHs <span class="ot">&lt;-</span> <span class="fu">sum</span>(hourtemps<span class="sc">$</span>Chilling_Hour[Start_row<span class="sc">:</span>End_row])</span>
<span id="cb6-30"><a href="manual-chill.html#cb6-30" tabindex="-1"></a><span class="fu">return</span>(CHs)</span>
<span id="cb6-31"><a href="manual-chill.html#cb6-31" tabindex="-1"></a></span>
<span id="cb6-32"><a href="manual-chill.html#cb6-32" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="application-example" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Application Example<a href="manual-chill.html#application-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The functions created allow for efficient calculation of Chilling Hours. For instance, using the <code>sum_CH()</code> function, it was calculated that between April 1st and October 11th, 2008, the walnut orchard experienced 77 Chilling Hours:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="manual-chill.html#cb7-1" tabindex="-1"></a><span class="fu">sum_CH</span>(hourtemps, <span class="at">startYEARMODAHO =</span><span class="dv">2008040100</span>,</span>
<span id="cb7-2"><a href="manual-chill.html#cb7-2" tabindex="-1"></a>                  <span class="at">endYEARMODAHO =</span> <span class="dv">2008101100</span>)</span></code></pre></div>
<pre><code>## [1] 77</code></pre>
</div>
</div>
<div id="exercises-on-basic-chill-modeling" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> <code>Exercises</code> on basic chill modeling<a href="manual-chill.html#exercises-on-basic-chill-modeling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><em>Write a basic function that calculates warm hours (&gt;25°C).</em></li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="manual-chill.html#cb9-1" tabindex="-1"></a>WH <span class="ot">&lt;-</span> <span class="cf">function</span>(data)</span>
<span id="cb9-2"><a href="manual-chill.html#cb9-2" tabindex="-1"></a>  {data[, <span class="st">&quot;Warm_Hour&quot;</span>] <span class="ot">&lt;-</span> data<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">25</span></span>
<span id="cb9-3"><a href="manual-chill.html#cb9-3" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb9-4"><a href="manual-chill.html#cb9-4" tabindex="-1"></a>}</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><em>Apply this function to the</em> <code>Winters_hours_gaps</code> <em>dataset.</em></li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="manual-chill.html#cb10-1" tabindex="-1"></a><span class="fu">WH</span>(Winters_hours_gaps)</span></code></pre></div>
<table class="table table-striped table-hover" style="font-size: 14px; color: black; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Year
</th>
<th style="text-align:center;">
Month
</th>
<th style="text-align:center;">
Day
</th>
<th style="text-align:center;">
Hour
</th>
<th style="text-align:center;">
Temp_gaps
</th>
<th style="text-align:center;">
Temp
</th>
<th style="text-align:center;">
Warm_Hour
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
10
</td>
<td style="text-align:center;">
15.127
</td>
<td style="text-align:center;">
15.127
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
11
</td>
<td style="text-align:center;">
17.153
</td>
<td style="text-align:center;">
17.153
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
12
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
13
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
18.699
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
14
</td>
<td style="text-align:center;">
18.842
</td>
<td style="text-align:center;">
18.842
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
15
</td>
<td style="text-align:center;">
19.508
</td>
<td style="text-align:center;">
19.508
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
16
</td>
<td style="text-align:center;">
19.318
</td>
<td style="text-align:center;">
19.318
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
17
</td>
<td style="text-align:center;">
17.701
</td>
<td style="text-align:center;">
17.701
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
18
</td>
<td style="text-align:center;">
15.414
</td>
<td style="text-align:center;">
15.414
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:center;">
2008
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
19
</td>
<td style="text-align:center;">
12.727
</td>
<td style="text-align:center;">
12.727
</td>
<td style="text-align:center;">
FALSE
</td>
</tr>
</tbody>
</table>
<ol start="3" style="list-style-type: decimal">
<li><em>Extend this function, so that it can take start and end dates as inputs and sums up warm hours between these dates.</em></li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="manual-chill.html#cb11-1" tabindex="-1"></a>sum_WH <span class="ot">&lt;-</span> <span class="cf">function</span>(data, </span>
<span id="cb11-2"><a href="manual-chill.html#cb11-2" tabindex="-1"></a>                   startYEARMODAHO,</span>
<span id="cb11-3"><a href="manual-chill.html#cb11-3" tabindex="-1"></a>                   endYEARMODAHO)</span>
<span id="cb11-4"><a href="manual-chill.html#cb11-4" tabindex="-1"></a>  </span>
<span id="cb11-5"><a href="manual-chill.html#cb11-5" tabindex="-1"></a>{data[,<span class="st">&quot;Warm_Hour&quot;</span>] <span class="ot">&lt;-</span> data<span class="sc">$</span>Temp <span class="sc">&gt;</span> <span class="dv">25</span></span>
<span id="cb11-6"><a href="manual-chill.html#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="manual-chill.html#cb11-7" tabindex="-1"></a>startYear <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb11-8"><a href="manual-chill.html#cb11-8" tabindex="-1"></a>startMonth <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb11-9"><a href="manual-chill.html#cb11-9" tabindex="-1"></a>startDay <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb11-10"><a href="manual-chill.html#cb11-10" tabindex="-1"></a>startHour <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(startYEARMODAHO, <span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb11-11"><a href="manual-chill.html#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="manual-chill.html#cb11-12" tabindex="-1"></a>endYear <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">1</span>, <span class="dv">4</span>))</span>
<span id="cb11-13"><a href="manual-chill.html#cb11-13" tabindex="-1"></a>endMonth <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb11-14"><a href="manual-chill.html#cb11-14" tabindex="-1"></a>endDay <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb11-15"><a href="manual-chill.html#cb11-15" tabindex="-1"></a>endHour <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(endYEARMODAHO, <span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb11-16"><a href="manual-chill.html#cb11-16" tabindex="-1"></a></span>
<span id="cb11-17"><a href="manual-chill.html#cb11-17" tabindex="-1"></a></span>
<span id="cb11-18"><a href="manual-chill.html#cb11-18" tabindex="-1"></a>Start_Date <span class="ot">&lt;-</span> <span class="fu">which</span>(data<span class="sc">$</span>Year <span class="sc">==</span> startYear <span class="sc">&amp;</span></span>
<span id="cb11-19"><a href="manual-chill.html#cb11-19" tabindex="-1"></a>                    data<span class="sc">$</span>Month <span class="sc">==</span> startMonth <span class="sc">&amp;</span></span>
<span id="cb11-20"><a href="manual-chill.html#cb11-20" tabindex="-1"></a>                    data<span class="sc">$</span>Day <span class="sc">==</span> startDay <span class="sc">&amp;</span></span>
<span id="cb11-21"><a href="manual-chill.html#cb11-21" tabindex="-1"></a>                    data<span class="sc">$</span>Hour <span class="sc">==</span> startHour)</span>
<span id="cb11-22"><a href="manual-chill.html#cb11-22" tabindex="-1"></a></span>
<span id="cb11-23"><a href="manual-chill.html#cb11-23" tabindex="-1"></a>End_Date <span class="ot">&lt;-</span> <span class="fu">which</span>(data<span class="sc">$</span>Year <span class="sc">==</span> endYear <span class="sc">&amp;</span></span>
<span id="cb11-24"><a href="manual-chill.html#cb11-24" tabindex="-1"></a>                  data<span class="sc">$</span>Month <span class="sc">==</span> endMonth <span class="sc">&amp;</span></span>
<span id="cb11-25"><a href="manual-chill.html#cb11-25" tabindex="-1"></a>                  data<span class="sc">$</span>Day <span class="sc">==</span> endDay <span class="sc">&amp;</span></span>
<span id="cb11-26"><a href="manual-chill.html#cb11-26" tabindex="-1"></a>                  data<span class="sc">$</span>Hour <span class="sc">==</span> endHour)</span>
<span id="cb11-27"><a href="manual-chill.html#cb11-27" tabindex="-1"></a></span>
<span id="cb11-28"><a href="manual-chill.html#cb11-28" tabindex="-1"></a>WHs <span class="ot">&lt;-</span> <span class="fu">sum</span>(data<span class="sc">$</span>Warm_Hour[Start_Date<span class="sc">:</span>End_Date])</span>
<span id="cb11-29"><a href="manual-chill.html#cb11-29" tabindex="-1"></a><span class="fu">return</span>(WHs)</span>
<span id="cb11-30"><a href="manual-chill.html#cb11-30" tabindex="-1"></a>}</span></code></pre></div>
<p>Application Example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="manual-chill.html#cb12-1" tabindex="-1"></a><span class="fu">sum_WH</span>(Winters_hours_gaps, <span class="at">startYEARMODAHO =</span> <span class="dv">2008080100</span>, </span>
<span id="cb12-2"><a href="manual-chill.html#cb12-2" tabindex="-1"></a>                           <span class="at">endYEARMODAHO =</span> <span class="dv">2008083100</span>)</span></code></pre></div>
<pre><code>## [1] 283</code></pre>
<p>During the month of August 2008, from the 1st to the 31st, the walnut orchard experienced a total of 283 warm hours (defined as hours when the temperature exceeded 25°C).</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="winter-chill-projections.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacqwng/Tree-Phenology-R/edit/main/06-manual_chill.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/jacqwng/Tree-Phenology-R/blob/main/06-manual_chill.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
